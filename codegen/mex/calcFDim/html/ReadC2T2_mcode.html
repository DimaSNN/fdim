<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"><span class="comment">%%hold off</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line"><span class="keyword">function</span> [<span class="var type0" id="S32T0U191">retData</span>, <span class="var type1" id="S33T2U192">n</span> ]  = ReadC2T(<span class="var type1" id="S34T1U195">filename</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line">    fclose(<span class="string">'all'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line">    <span class="mxinfo " id="T2:U3"><span class="var type1" id="S36T2U202">fileID</span> = <span class="mxinfo " id="T2:U5">fopen(<span class="mxinfo " id="T1:U6">[<span class="var type1" id="S34T1U207">filename</span> <span class="mxinfo " id="T3:U8"><span class="string">''</span></span> <span class="mxinfo " id="T4:U9"><span class="string">'.c2t'</span></span>]</span>,<span class="string">'r'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line">    <span class="comment">%fileID = fopen('Lorenz.dat.c2t','r');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">    <span class="var type0" id="S38T0U213">InputText</span> = <span class="message error" id="M16F2C">textscan(<span class="var type1" id="S36T2U216">fileID</span>, <span class="mxinfo " id="T5:U11"><span class="string">'#m=%d'</span></span> ,<span class="mxinfo " id="T2:U12">1</span>, <span class="mxinfo " id="T6:U13"><span class="string">'Delimiter'</span></span>, <span class="mxinfo " id="T7:U14"><span class="string">'\n'</span></span>)</span>; <span class="comment">%здесь просто пропускается строка</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">    <span class="mxinfo " id="T2:U15"><span class="var type1" id="S40T2U223">Block</span> =<span class="mxinfo " id="T2:U17">1</span></span>; <span class="comment">%as m== 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line">    <span class="keyword">while</span> (<span class="mxinfo " id="T8:U18">~<span class="mxinfo " id="T2:U19">feof(<span class="var type1" id="S36T2U230">fileID</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73">73</a></span><span class="line">        <span class="comment">%fprintf('Block: %s\n', num2str(Block));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74">74</a></span><span class="line">        <span class="var type0" id="S42T0U234"><span class="message error" id="M17F2C">HeaderLines</span></span>{<span class="var type0" id="S40T0U235">Block</span>,1} = <span class="var type0" id="S38T0U238">InputText</span>{1};</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75">75</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76">76</a></span><span class="line">        <span class="mxinfo " id="T4:U21"><span class="var type1" id="S43T4U242">FormatString</span> = <span class="mxinfo " id="T4:U23">repmat(<span class="string">'%f'</span>,1, 2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77">77</a></span><span class="line">        <span class="var type0" id="S38T0U250">InputText</span> = <span class="message error" id="M18F2C">textscan(<span class="var type1" id="S36T2U253">fileID</span>, <span class="var type1" id="S43T4U254">FormatString</span>, <span class="keyword">...</span><span class="comment">    <span class="comment">% Read data block</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78">78</a></span><span class="line">            <span class="mxinfo " id="T6:U26"><span class="string">'delimiter'</span></span>,<span class="mxinfo " id="T7:U27"><span class="string">'\t'</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79">79</a></span><span class="line">        <span class="var type0" id="S45T0U260"><span class="message error" id="M19F2C">Data</span></span>{<span class="var type0" id="S40T0U261">Block</span>,1} = cell2mat(<span class="var type0" id="S38T0U265">InputText</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80">80</a></span><span class="line">        [<span class="var type0" id="S47T0U269"><span class="message error" id="M21F2C">NumRows</span></span>,<span class="var type0" id="S48T0U270"><span class="message error" id="M22F2C">NumCols</span></span>] = size(<span class="var type0" id="S45T0U274"><span class="message error" id="M20F2C">Data</span></span>{<span class="var type0" id="S40T0U275">Block</span>});           <span class="comment">% Determine size of table</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81">81</a></span><span class="line">        <span class="comment">%disp(cellstr(['Table data size: ' num2str(NumRows) ' x ' num2str(NumCols)]));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82">82</a></span><span class="line">        <span class="comment">%disp(' ');                                       % New line</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83">83</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84">84</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85">85</a></span><span class="line">        <span class="var type0" id="S50T0U278">eob</span> = <span class="message error" id="M23F2C">textscan(<span class="var type1" id="S36T2U281">fileID</span>,<span class="mxinfo " id="T7:U29"><span class="string">'%s'</span></span>,<span class="mxinfo " id="T2:U30">1</span>,<span class="mxinfo " id="T6:U31"><span class="string">'delimiter'</span></span>,<span class="mxinfo " id="T7:U32"><span class="string">'\n'</span></span>)</span>;  <span class="comment">% Read and discard end-of-block marker</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86">86</a></span><span class="line">        <span class="mxinfo " id="T2:U33"><span class="var type1" id="S33T2U288">n</span> = <span class="var type1" id="S40T2U289">Block</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87">87</a></span><span class="line">        <span class="mxinfo " id="T2:U36"><span class="var type1" id="S40T2U292">Block</span> = <span class="mxinfo " id="T2:U38"><span class="var type1" id="S40T2U294">Block</span>+<span class="mxinfo " id="T2:U40">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88">88</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89">89</a></span><span class="line">    fclose(<span class="var type1" id="S36T2U299">fileID</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90">90</a></span><span class="line">    <span class="var type0" id="S32T0U302">retData</span> = <span class="var type0" id="S45T0U303"><span class="message error" id="M24F2C">Data</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91">91</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
